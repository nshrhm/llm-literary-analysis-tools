# System Patterns

## System Architecture
- 本プロジェクトは、複数の大規模言語モデル（LLM）を用いて日本語文学作品の感情分析を行うための実験基盤を構築し、その結果を分析するシステムです。
- データ処理と分析はPythonスクリプトによって行われ、データの入出力はCSVファイルを介して管理されます。
- 視覚化スクリプトは、分析結果を学術論文に適したグラフとして出力し、PNGおよびSVG形式で保存します。

## Key Technical Decisions
- **モジュール化**: 分析スクリプトは機能ごとに分割され、データ抽出、統計計算、視覚化の各ステップが独立したスクリプトとして実装されています。
- **共通設定の集中管理**: `src/config.py`に共通の設定や関数を定義し、スクリプト間の一貫性を保ちます。
- **言語対応**: 日本語および英語のグラフ生成をサポートするため、言語切り替え機能を実装する予定です。

## Design Patterns in Use
- **パイプライン処理**: データ処理はパイプライン形式で行われ、データ抽出→統計分析→視覚化の順に処理が進みます。
- **設定駆動型開発**: スクリプトの動作は設定ファイル（`src/config.py`）に基づいており、コードの変更を最小限に抑えつつ柔軟な対応が可能です。

## Component Relationships
- **データ処理コンポーネント**: `*_analysis.py`スクリプトがCSVファイルからデータを抽出し、必要な形式に変換します。
- **統計分析コンポーネント**: `*_statistics.py`スクリプトが要約統計量を計算し、結果をCSVファイルに保存します。
- **視覚化コンポーネント**: `*_visualize.py`スクリプトがデータを基にグラフを生成し、PNGおよびSVG形式で保存します。
- これらのコンポーネントは独立して動作し、CSVファイルを介してデータをやり取りします。

## Critical Implementation Paths
- **データフロー**: `data_all.csv` → 分析スクリプト → 中間CSVファイル → 統計スクリプト → 結果CSVファイル → 視覚化スクリプト → グラフ出力
- **エラー処理**: 各スクリプトはデータの欠損や異常値に対して適切な処理を行い、エラーメッセージをログとして出力します。
- **拡張性**: 新しい分析や視覚化の追加は、既存のスクリプトを参考に新しいスクリプトを作成することで容易に行えます。
